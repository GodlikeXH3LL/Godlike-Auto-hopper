local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library", true))()
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local TeleportService = game:GetService("TeleportService")

local window = library:AddWindow("Private Auto Hopper", {
    main_color = Color3.fromRGB(0, 0, 0),
    min_size = Vector2.new(700, 900),
    can_resize = true,
})

local AutoKill = window:AddTab("Auto Kill")
local Folder1 = AutoKill:AddFolder("Auto kill + hop")

Folder1:AddSwitch("Auto Kill + hop", function(bool)
    _G.Autokill = bool

    if bool then
        spawn(function()
            while _G.Autokill do
                task.wait()

                local success = false

                for _, plr in ipairs(Players:GetPlayers()) do
                    if plr ~= player then
                        local isWhitelisted = false

                        if _G.whitelistedPlayers then
                            for _, whitelistedInfo in ipairs(_G.whitelistedPlayers) do
                                if string.find(plr.Name, whitelistedInfo, 1, true) then
                                    isWhitelisted = true
                                    break
                                end
                            end
                        end

                        if not isWhitelisted then
                            killPlayer(plr)
                            success = true
                        end
                    end
                end

                if not success then
                    local servers = {}
                    repeat
                        local cursor = #servers > 0 and servers[#servers].cursor or ""
                        local url = string.format("https://games.roblox.com/v1/games/%s/servers/Public?sortOrder=Asc&limit=100%s", game.PlaceId, cursor ~= "" and "&cursor=" .. cursor or "")
                        local res = game:HttpGet(url)
                        local data = game.HttpService:JSONDecode(res)
                        for _, v in ipairs(data.data) do
                            if v.playing < v.maxPlayers and v.id ~= game.JobId then
                                table.insert(servers, v)
                            end
                        end
                    until not data.nextPageCursor

                    if #servers > 0 then
                        local randomServer = servers[math.random(1, #servers)]
                        TeleportService:TeleportToPlaceInstance(game.PlaceId, randomServer.id, player)
                    end
                end
            end
        end)
    end
end)
